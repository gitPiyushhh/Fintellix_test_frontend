<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Category Management</title>

    <script src=".//js/components/questions.js"></script>

    <!-- Icons -->
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700&family=Open+Sans:ital,wght@0,300;0,400;0,500;1,300;1,600&display=swap"
      rel="stylesheet"
    />

    <!-- Kendo Part -->

    <link
      rel="stylesheet"
      href="https://kendo.cdn.telerik.com/themes/6.7.0/default/default-main.css"
    />
    <script src="https://kendo.cdn.telerik.com/2023.2.829/js/jquery.min.js"></script>
    <script src="https://kendo.cdn.telerik.com/2023.2.829/js/kendo.all.min.js"></script>

    <!-- <link rel="stylesheet" type="text/css" href="css/font-awesome.css" />  -->

    <link rel="stylesheet" href="./css/addQuestion.css" />
    <link rel="stylesheet" href="./css/createUser.css" />
    <link rel="stylesheet" href="./css/navbar.css" />
    <link rel="stylesheet" href="./css/ulitlities.css" />
    <link rel="stylesheet" href="./css/form.css" />
    <link rel="stylesheet" href="./css/popup.css" />
    <link rel="stylesheet" href="./css/scrollbar.css" />

    <script type="text/javascript" src="questionSection.js"></script>
  </head>
  <body>
    <!-- Form popup -->

    <div class="overlay u-display-none" id="categories__overlay">
      <div id="questionPopup" class="popup">
        <div class="popup__content">
          <span
            id="closeQuestion"
            class="popup__icon"
            style="float: right; cursor: pointer"
            >&times;</span
          >

          <h3 class="popup__title">Questions</h3>

          <div id="addQuestionsGrid" class="popup__content">
            
          </div>
        </div>
      </div>
    </div>

    <!-- Kendo grir popup  -->

    <div class="overlay u-display-none" id="questions__overlay">
      <div id="questionPopup" class="popup">
        <div class="popup__content">
          <span
            id="closeQuestion2"
            class="popup__icon"
            style="float: right; cursor: pointer"
            >&times;</spanx
          >

          <h3 class="popup__title">Questions</h3>

          <div id="popupAddQuestions" class="popup__content"></div>
        </div>
      </div>
    </div>

    <nav class="navbar">
      <ul class="u-flex">
        <a class="logo" href="./index.html" style="cursor: pointer">
          <img
            src="./../../Drawables/FIntellix Logo.svg"
            alt="Website logo"
            class="navbar__logo"
          />
        </a>
        <div class="u-flex">
          <li class="dropdown">
            <a href="#" class="dropbtn">Home</a>
          </li>
          <li class="dropdown">
            <a href="./questions.html" class="dropbtn">Questions</a>
          </li>
          <li class="dropdown">
            <a href="./categories.html" class="dropbtn">Categories</a>
          </li>
          <li>
            <a href="#" class="dropbtn" style="text-decoration: none"
              >Analytics</a
            >
          </li>

          <li>
            <a href="#" class="dropbtn" style="text-decoration: none"
              >Certifications</a
            >
          </li>

          <li>
            <a href="./user.html" class="dropbtn" style="text-decoration: none"
              >Users</a
            >
          </li>

          <li class="userAvatar" style="margin-left: 1rem"></li>
        </div>
      </ul>
    </nav>

    <div class="user__button">
      <div class="user__button-inner" style="justify-content: flex-end">
        <a
          class="button u-flex"
          style="
            background-color: #1a7aaf;
            justify-self: flex-end;
            padding: 0.75rem 1.5rem;
            margin-top: 0.5rem;
          "
          href="#"
          id="showForm"
        >
          Add Section
          <iconify-icon
            icon="zondicons:add-outline"
            style="margin-left: 8px"
          ></iconify-icon>
        </a>
      </div>
    </div>

    <div
      class="wrapper u-display-none"
      style="margin-top: 3rem"
      id="categories__main-content"
    >
      <div class="form-container u-flex" style="position: relative">
        <div
          class="u-flex-col form__inner-container"
          style="width: 100%; margin-top: 2rem"
        >
          <h1>Create section</h1>
          <span
            id="closeMainContent"
            class="popup__icon"
            style="float: right; cursor: pointer"
            >&times;</span
          >

          <form action="#" method="post">
            <label for="name">Section name:*</label>
            <input
              type="text"
              id="name"
              name="name"
              class="form__input-box"
              required
            />

            <label for="category">Categories type:*</label>
            <select
              id="category"
              class="form__input-box"
              style="font-size: 14px; color: #565656; padding-right: 1rem"
            >
              <option disabled selected value="">Select from options</option>
              <option value="easy">Programming</option>
              <option value="medium">Logical</option>
              <option value="hard">Aptitude</option>
            </select>

            <label for="time">Time limit (in minutes):</label>
            <input
              type="number"
              id="time"
              name="email"
              class="form__input-box"
              required
            />

            <label for="time">Pass percentage:</label>
            <input
              type="number"
              id="time"
              name="email"
              class="form__input-box"
              required
            />

            <div class="button-container-2">
              <button type="submit" class="add-button">Add</button>
              <button type="button" class="cancel-button">Cancel</button>
            </div>

            <div class="button-container-2">
              <a
                type="button"
                class="add-button"
                style="text-align: center; width: 35%"
                onclick="openQuestionPopup1()"
                id="addQuestionGridElem"
                >Select questions</a
              >
            </div>

            <h3 class="popup__title">Questions</h3>
            <div id="addQuestionsGridCustom" class=""></div>
          </form>
        </div>
      </div>
    </div>

    <!-- Grid  -->
    <div
      id="main__content"
      style="margin-top: 1.5rem"
      class="grid categories__grid"
    ></div>

    <script>
      function getGlobalTable() {
        console.log("started");

        // Hard-coded categories
        const categoriesArray = [
          {
            cid: 1,
            sectionName: "Java Easy for Freshers",
            category_type: "Programming",
          },

          {
            cid: 2,
            sectionName: "Java Test for 2-year Ex",
            category_type: "Java",
          },

          {
            cid: 3,
            sectionName: "SQL Test for 2-year Ex",
            category_type: "SQL",
          },
        ];

        // Define a Kendo DataSource with the hard-coded data

        const dataSource1 = new kendo.data.DataSource({
          data: categoriesArray,
        });

        // Create and append a div for the grid to the main content

        const mainContent = $("#main__content");

        mainContent.empty(); // Clear the main content

        //const gridDiv = $("<div id='grid'></div>");
        const gridDiv = $("<div id='grid'></div>");

        mainContent.append(gridDiv);

        // Initialize the Kendo Grid inside the grid div

        gridDiv.kendoGrid({
          dataSource: dataSource1,

          height: 250,
          sortable: true,
          pageable: { pageSize: true },
          filterable: true,

          columns: [
            { field: "cid", title: "cid", width: "50px" },

            { field: "sectionName", title: "sectionName", width: "200px" },

            { field: "category_type", title: "Category Title", width: "200px" },

            {
              title: "Actions",
              template: `
                      <button class="k-button" onclick="loadquestionsSection(#: cid#)">ViewQuestions</button>
                            <button class="k-button" onclick="editCategory(#: cid#)">Edit</button>
                            <button class="k-button" onclick="deleteSection(#: cid#)">Delete</button>
            `,
              width: "200px",
            },
          ],

          footer: "Total: #= kendo.toString(sum, 'c') #",
        });
      }

      getGlobalTable();

      // 2. Create form on click
      function loadAddSectionForm() {
        const mainContent = $("#main__content");
        mainContent.empty(); // Clear the main content

        const sectionForm = `
            <div class="form-container u-flex" style="height: 80%; position: relative;">
            <div class="u-flex-col form__inner-container" style="width: 100%;">
            <h1>Create section</h1>
            <span id="closeEditQuestion" class="popup__icon" style="float: right; cursor: pointer;">&times;</span>
            <form action="#" method="post">
            <label for="name">Section name:*</label>
            <input type="text" id="name" name="name" class="form__input-box" required />
            <label for="category">Categories type:*</label>
            <select id="category" class="form__input-box" style="font-size: 14px; color: #565656; padding-right: 1rem;">
            <option disabled selected value="">Select from options</option>
            <option value="easy">Programming</option>
            <option value="medium">Logical</option>
            <option value="hard">Aptitude</option>
            </select>
            <label for="time">Time limit (in minutes):</label>
            <input type="number" id="time" name="email" class="form__input-box" required />
            <label for="passPercentage">Pass percentage:</label>
            <input type="number" id="passPercentage" name="email" class="form__input-box" required />
            <div class="button-container-2">
            <button type="submit" class="add-button">Add</button>
            <button type="button" class="cancel-button">Cancel</button>
            </div>
            </form>
            </div>
            </div>
                `;

        mainContent.append(sectionForm);

        // Add event listener to close the form when the "Close" icon is clicked
        $("#closeEditQuestion").on("click", function () {
          mainContent.empty(); // Clear the form when closed
          getGlobalTable();
        });
      }

      // Add click event handler for the "Add Section" button
      $("#showForm").on("click", function () {
        loadAddSectionForm();
      });

      // 2. Popup questions open
      function loadquestionsSection() {
        // Function to load and display the "Edit Category" form (similar to the "Add Section" form)

      }

      //////////////////////////////////////////
      ///
      function editCategory(cid) {
    const mainContent = $("#main__content");
    mainContent.empty(); // Clear the main content
    const editCategoryForm = `
<div class="form-container u-flex" style="height: 80%; position: relative;">
<div class="u-flex-col form__inner-container" style="width: 100%;">
<h1>Edit Category</h1>
<span id="closeEditCategoryPopup" class="popup__icon" style="float: right; cursor: pointer;">&times;</span>
<form action="#" method="post">
<label for="name">Category Name:*</label>
<input type="text" id="name" name="name" class="form__input-box" required />
<label for="categoryType">Category Type:*</label>
<select id="categoryType" class="form__input-box" style="font-size: 14px; color: #565656; padding-right: 1rem;">
<option disabled selected value="">Select from options</option>
<option value="Programming">Programming</option>
<option value="Logical">Logical</option>
<option value="Aptitude">Aptitude</option>
</select>
<label for="time">Time limit (in minutes):</label>
<input type="number" id="time" name="email" class="form__input-box" required />
<label for="passPercentage">Pass percentage:</label>
<input type="number" id="passPercentage" name="email" class="form__input-box" required />
<div class="button-container-2">
<button type="submit" class="add-button">Save</button>
<button type="button" class="cancel-button">Cancel</button>
</div>
</form>
</div>
</div>
    `;
    mainContent.append(editCategoryForm);
    // Add event listener to close the form when the "Close" icon is clicked
    $("#closeEditCategoryPopup").on("click", function () {
        mainContent.empty(); // Clear the form when closed
        getGlobalTable()
    });
}

 

// // Add click event handler for the "Edit Category" button (assuming you have a button with id "editCategoryButton")
// $("#editCategoryButton").on("click", function () {
//     loadEditCategoryForm();
// });


      console.log("Completed");
    </script>
  </body>
</html>
